<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Unitec Ecatepec | Control Multi-Agente</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <meta http-equiv="refresh" content="10">
</head>
<body>

<header>
    <div>
        <h2 style="margin:0;">UNITEC ECATEPEC</h2>
        <small>Sistemas Inteligentes - Panel de Control Individual</small>
    </div>
    <div class="badge">RED DE AGENTES ACTIVA</div>
</header>

<div class="dashboard-grid">
    {% for nombre_agente, datos in agentes.items() %}
    <div class="card">
        <div style="border-bottom: 1px solid #333; margin-bottom: 15px; padding-bottom: 10px;">
            <h3 style="margin:0; color:var(--naranja-unitec);">Agente: {{ nombre_agente }}</h3>
            <small style="color:var(--success);">Ultima se√±al: {{ datos.hora }}</small>
        </div>
        
        <div class="led-status">
            <div class="led-indicator">
                <div class="circle {{ 'on' if datos.led1 == 1 else '' }}"></div>
                <small>Led 1</small>
            </div>
            <div class="led-indicator">
                <div class="circle {{ 'on' if datos.led2 == 1 else '' }}"></div>
                <small>Led 2</small>
            </div>
            <div class="led-indicator">
                <div class="circle {{ 'on' if datos.led3 == 1 else '' }}"></div>
                <small>Led 3</small>
            </div>
        </div>
        
        <div style="margin-top: 20px; font-size: 0.7rem; color: #555; text-align: center;">
            ID Unico: {{ nombre_agente | upper }}
        </div>
    </div>
    {% else %}
    <div class="card" style="grid-column: 1 / -1;">
        <p style="text-align:center; color:var(--texto-gris);">Esperando a que los agentes se reporten desde el ESP32 C3...</p>
    </div>
    {% endfor %}
</div>

<footer style="text-align:center; margin-top:50px; color:var(--texto-gris); font-size:0.8rem; border-top: 1px solid #222; padding-top: 20px;">
    Unitec Ecatepec - Ingenieria en Sistemas
</footer>

</body>
</html>