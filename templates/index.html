<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Smart Home Unitec | Ecatepec</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <meta http-equiv="refresh" content="10">
</head>
<body>

<header>
    <div>
        <h2 style="margin:0;">UNITEC SMART HOME</h2>
        <small>Sistemas Inteligentes - Nodo Ecatepec</small>
    </div>
    <div class="badge">MONITOREO CLIMÁTICO ACTIVO</div>
</header>

<div class="dashboard-grid">
    {% for nombre, info in agentes.items() %}
    <div class="card">
        <h3>Variables Atmosféricas</h3>
        <div style="font-size: 1.2rem; line-height: 2;">
            <div>Temperatura: <span style="color:var(--naranja-unitec)">{{ info.temp }}°C</span></div>
            <div>Humedad: <span style="color:var(--naranja-unitec)">{{ info.hum }}%</span></div>
            <div>Viento: <span style="color:var(--naranja-unitec)">{{ info.viento }} km/h</span></div>
        </div>
        <p style="font-size: 0.7rem; color: var(--texto-gris);">Sincronizado: {{ info.hora }}</p>
    </div>

    <div class="card">
        <h3>Estado de Actuadores</h3>
        <div class="led-status">
            <div class="led-indicator">
                <div class="circle {{ 'on' if info.act1 == 1 else '' }}"></div>
                <small>Ventilador</small>
            </div>
            <div class="led-indicator">
                <div class="circle {{ 'on' if info.act2 == 1 else '' }}"></div>
                <small>Humidificador</small>
            </div>
            <div class="led-indicator">
                <div class="circle {{ 'on' if info.act3 == 1 else '' }}"></div>
                <small>Iluminación</small>
            </div>
        </div>
        <div style="margin-top:15px; border-top: 1px solid #333; padding-top:10px; font-size:0.7rem;">
            <strong>Reglas:</strong> Temp > 28°C (Vent) | Hum < 30% (Humid) | Viento > 20km/h (Luz)
        </div>
    </div>
    {% endfor %}
</div>
</body>
</html>