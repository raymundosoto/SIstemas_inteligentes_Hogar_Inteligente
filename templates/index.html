<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dashboard IoT | Unitec Ecatepec</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <meta http-equiv="refresh" content="10">
</head>
<body>

<header>
    <div>
        <h2 style="margin:0;">UNITEC</h2>
        <small>Campus Ecatepec - Sistemas Inteligentes</small>
    </div>
    <div class="badge">SISTEMA ACTIVO</div>
</header>

<div class="dashboard-grid">
    
    <div class="card">
        <h3>Agentes Inteligentes</h3>
        <table style="width:100%; text-align:left; border-collapse:collapse;">
            <thead>
                <tr style="color:var(--naranja-unitec); border-bottom:1px solid #333;">
                    <th style="padding:10px;">ID Dispositivo</th>
                    <th style="padding:10px;">Hora de Conexion</th>
                </tr>
            </thead>
            <tbody>
                {% for nombre, info in agentes.items() %}
                <tr style="border-bottom: 1px solid #222;">
                    <td style="padding:10px;">{{ nombre }}</td>
                    <td style="padding:10px; color:var(--success);">{{ info.hora }}</td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="2" style="padding:20px; text-align:center; color:var(--texto-gris);">
                        Esperando reporte de agentes...
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    {% for nombre, info in agentes.items() %}
    <div class="card">
        <h3>Estado: {{ nombre }}</h3>
        <div class="led-status">
            <div class="led-indicator">
                <div class="circle {{ 'on' if info.led1 == 1 else '' }}"></div>
                <small>Led 1</small>
            </div>
            <div class="led-indicator">
                <div class="circle {{ 'on' if info.led2 == 1 else '' }}"></div>
                <small>Led 2</small>
            </div>
            <div class="led-indicator">
                <div class="circle {{ 'on' if info.led3 == 1 else '' }}"></div>
                <small>Led 3</small>
            </div>
        </div>
        <p style="text-align:center; font-size:0.75rem; margin-top:20px; color:var(--texto-gris);">
            Sincronizado con raymundoss.pythonanywhere.com
        </p>
    </div>
    {% endfor %}

</div>

<footer style="text-align:center; margin-top:40px; color:var(--texto-gris); font-size:0.8rem; padding: 20px;">
    Unitec Ecatepec - Proyecto de Ingenieria - 2026
</footer>

</body>
</html>